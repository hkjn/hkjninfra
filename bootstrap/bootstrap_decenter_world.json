{"systemd": {"units": [{"enable": true, "name": "tclient.service", "contents": "[Unit]\nDescription=tclient\nAfter=network-online.target\n\n[Service]\nEnvironment=REPORT_ADDR=mon.hkjn.me:50051\nEnvironment=REPORT_FACTS_PATH=/etc/report_facts.json\nEnvironment=REPORT_TLS_CA_CERT=/etc/ssl/mon_ca.pem\nEnvironment=REPORT_TLS_CERT=/etc/ssl/%H.pem\nEnvironment=REPORT_TLS_KEY=/etc/ssl/%H-key.pem\n\nExecStartPre=-/bin/bash -c \"/opt/bin/gather_facts > /etc/report_facts.json\"\nExecStart=/bin/bash -c /opt/bin/tclient\n\n[Install]\nWantedBy=multi-user.target\n"}, {"enable": true, "name": "tclient.timer", "contents": "[Unit]\nDescription=Timer that starts report_client.service\n\n[Timer]\n# Run every 5 min.\nOnCalendar=*:0/5\nPersistent=true\n\n[Install]\nWantedBy=multi-user.target\n"}, {"enable": true, "name": "decenter.service", "contents": "[Unit]\nDescription=decenter.world server\nAfter=network-online.target\n\n[Service]\nEnvironment=PATH=/usr/bin/:/opt/bin:/bin\nEnvironment=DECENTER_WORLD_ADDR=:443\nExecStart=/usr/bin/bash -c \"decenter_world\"\nRestart=always\n\n[Install]\nWantedBy=multi-user.target\n \n"}, {"enable": true, "name": "decenter_redirector.service", "contents": "[Unit]\nDescription=decenter.world redirector server\n\nAfter=network-online.target\n\n[Service]\nEnvironment=PATH=/usr/bin/:/opt/bin:/bin\nExecStart=/usr/bin/bash -c \"decenter_redirector\"\nRestart=always\n\n[Install]\nWantedBy=multi-user.target\n"}, {"enable": true, "name": "etc-secrets.mount", "contents": "[Mount]\nWhat=/dev/disk/by-id/scsi-0Google_PersistentDisk_persistent-disk-1\nWhere=/etc/secrets\nType=ext4\n\n[Install]\nRequiredBy=local-fs.target\n"}], "passwd": {}, "networkd": {}}, "storage": {"files": [{"group": {}, "user": {}, "filesystem": "root", "path": "/etc/coreos/update.conf", "contents": {"source": "data:,GROUP%3Dbeta%0AREBOOT_STRATEGY%3D%22etcd-lock%22", "verification": {}}, "mode": 420}, {"group": {}, "user": {}, "filesystem": "root", "path": "/opt/bin/gather_facts", "contents": {"source": "https://github.com/hkjn/hkjninfra/releases/download/1.4.3/gather_facts", "verification": {"hash": "sha512-ff7bdbfb8fe387144529e658d04bcf78e8d4f10f36b82b78892be845b4c40b68112c35f36ea05df3d79969319dba29b2caed123f29245038ad0efa68b4a5de4d"}}, "mode": 493}, {"group": {}, "user": {}, "filesystem": "root", "path": "/opt/bin/tclient", "contents": {"source": "https://github.com/hkjn/hkjninfra/releases/download/1.4.3/tclient_x86_64", "verification": {"hash": "sha512-11a44cba387ccfb4357e4b4dbf38b749d5fadf897c0c0025f2e2cf54bb0f4ed8ffec7a0e739ead62cb3171dad417d37270cf0da81453a7906f858a75fb5765ff"}}, "mode": 493}, {"group": {}, "user": {}, "filesystem": "root", "path": "/opt/bin/decenter_world", "contents": {"source": "https://github.com/hkjn/decenter.world/releases/download/1.1.7/decenter_world_x86_64", "verification": {"hash": "sha512-123cec939d7c03c239ee6040185ccb8b74d5d875764479444448ca2ea31d25f364a891363a5850fba2564ce238c7548b3677d713ce69ed7caf421950cd3cd5c6"}}, "mode": 493}, {"group": {}, "user": {}, "filesystem": "root", "path": "/opt/bin/decenter_redirector", "contents": {"source": "https://github.com/hkjn/decenter.world/releases/download/1.1.7/decenter_redirector_x86_64", "verification": {"hash": "sha512-624a743e008e9a02bd46ec3d6d0bdffd57749695a336e59ebc53875a8867d39990d38ed7638e9f3d2255345626ca3ed16fe9e2235dacaf28646c250d1d5d0a21"}}, "mode": 493}], "filesystem": []}, "ignition": {"version": "2.0.0", "config": {}}}